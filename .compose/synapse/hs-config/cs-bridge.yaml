server_name: 'docker.internal'
pid_file: /data/homeserver.pid
listeners:
  - port: 8008
    tls: false
    type: http
    x_forwarded: true
    bind_addresses: ['0.0.0.0']
    resources:
      - names: [client, federation]
        compress: false
database:
  name: psycopg2
  txn_limit: 10000
  args:
    user: synapse_user
    password: secretpassword
    dbname: synapse
    host: postgres
    port: 5432
    cp_min: 5
    cp_max: 10
log_config: '/data/docker.internal.log.config'
media_store_path: /data/media_store
signing_key_path: '/data/docker.internal.signing.key'
macaroon_secret_key: 'i8dF@4#7uLt~ZJC@m@HqxfXt+-Y^rvI5yF3CC;8LbXwNLWO9YM'
form_secret: ':m_kP~38:lPnlfO2S8lhSrMRy8T52~dT=e35X+jCMHNz-pxIoZ'
trusted_key_servers:
  - server_name: 'matrix.org'
enable_metrics: false
report_stats: false
enable_registration: true
enable_registration_without_verification: true

# Change booleans to test cs-bridge behavior
enable_set_displayname: false # if false => cs-bridge must be set to SYNAPSE_ADMIN_API_MODE: 'fallback' or 'exclusive' to allow display name changes
enable_set_avatar_url: false # if false => cs-bridge must be set to SYNAPSE_ADMIN_API_MODE: 'fallback' or 'exclusive' to allow avatar changes
enable_3pid_changes: false # untouched by cs-bridge yet

app_service_config_files:
  - "/data/cs-bridge-registration.yaml"

enable_authenticated_media: true
